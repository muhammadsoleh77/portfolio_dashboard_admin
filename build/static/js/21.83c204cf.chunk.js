(this.webpackJsonpreactjs_adminlte=this.webpackJsonpreactjs_adminlte||[]).push([[21],{309:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return u}));var n=t(38),l=t(11),i=t(12),o=t(14),s=t(13),r=t(0),c=t.n(r),d=t(37),m=t(33),u=function(e){Object(o.a)(t,e);var a=Object(s.a)(t);function t(e){var i;return Object(l.a)(this,t),(i=a.call(this,e)).handleChangeStatus=function(e){i.setState(Object(n.a)({},e.target.name,!i.state.status))},i.handleChangeBerangkat=function(e){i.setState(Object(n.a)({},e.target.name,!i.state.tempatBerangkat))},i.inputFileLogo=function(){void 0!==i.fileInputLogo.current&&void 0!==i.fileInputLogo.current.click&&i.fileInputLogo.current.click()},i.OptionWilayah=function(e){return{value:e.id,label:e.namaWilayah}},i.handleChangeWilayah=function(e){i.setState({idWilayah:e.value}),i.getLokasi(e.value)},i.OptionLokasi=function(e){return{value:e.id,label:e.namaLokasi}},i.handleChangeLokasi=function(e){i.setState({idLokasi:e.value})},i.handleChange=function(e){i.setState(Object(n.a)({},e.target.name,e.target.value))},i.getInitialState=function(){return{file:[]}},i.onChangeLogo=function(e){i.setState({imgLogo:e.target.files[0]})},i.OptionPo=function(e){return{value:e.idPo,label:e.nama}},i.handleChangePo=function(e){i.setState({idPo:e.value})},i.removePo=function(e){var a=i.state.pos;e>-1&&(a.splice(e,1),i.setState({pos:a},(function(){console.log(i.state.pos)})))},i.fileInputLogo=c.a.createRef(),i.state={value:"",label:"",fields:{},errors:{},dataPo:[],dataWilayah:[],dataLokasi:[],options:[],idPo:"",dataArray:[],selectedOptions:[],valuePo:[],values:"",status:!1,tempatBerangkat:!1,idWilayah:"",pos:[]},i}return Object(i.a)(t,[{key:"handleValidation",value:function(){var e=this.state.fields,a={},t=!0;return e.namaAgen||(t=!1,a.namaAgen="Tidak boleh kosong"),e.nomorTelpon||(t=!1,a.nomorTelpon="Tidak boleh kosong"),e.longitude||(t=!1,a.longitude="Tidak boleh kosong"),e.latitude||(t=!1,a.latitude="Tidak boleh kosong"),e.status||(t=!1,a.status="Tidak boleh kosong"),e.tempatBerangkat||(t=!1,a.tempatBerangkat="Tidak boleh kosong"),this.setState({errors:a}),t}},{key:"EndpointAgenId",value:function(){var e=this;m.a.get("/admin/agen/"+this.props.match.params.idAgen).then((function(a){e.setState({idWilayah:a.data.idWilayah,idLokasi:a.data.idLokasi,alamat:a.data.alamat,nomorTelpon:a.data.nomorTelpon,kontakPerson:a.data.kontakPerson,tempatBerangkat:a.data.tempatBerangkat,namaAgen:a.data.namaAgen,pos:a.data.pos,logo:a.data.logo,latitude:a.data.latitude,longitude:a.data.longitude,status:a.data.status}),e.getLokasi(a.data.idWilayah),e.endpointPoId(e.state.pos)}))}},{key:"EndpointPo",value:function(){var e=this;m.a.get("/admin/po/getAll").then((function(a){e.setState({dataPo:a.data})}))}},{key:"EndpointWilayah",value:function(){var e=this;m.a.get("/admin/wilayah/list").then((function(a){e.setState({dataWilayah:a.data})}))}},{key:"componentDidMount",value:function(){this.EndpointAgenId(),this.EndpointPo(),this.EndpointWilayah()}},{key:"getLokasi",value:function(e){var a=this;m.a.get("/admin/lokasi/list/wilayah/"+e).then((function(t){a.setState({idWilayahs:e,dataLokasi:t.data})}))}},{key:"endpointPoId",value:function(e){for(var a=0;a<e.length;a++);}},{key:"tambahData",value:function(e){var a=this;e.preventDefault();var t=[];this.state.pos.forEach((function(e){t.push(e.idPo)}));var n=new FormData;n.append("id",this.props.match.params.idAgen),n.append("idLokasi",this.state.idLokasi),n.append("idWilayah",this.state.idWilayah),n.append("latitude",this.state.latitude),this.state.imgLogo&&n.append("logo",this.state.imgLogo),n.append("longitude",this.state.longitude),n.append("namaAgen",this.state.namaAgen),n.append("nomorTelpon",this.state.nomorTelpon),n.append("po",t),n.append("status",this.state.status),n.append("tempatBerangkat",this.state.tempatBerangkat),Object(m.a)({method:"put",url:"/admin/agen/edit",data:n,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e),alert("Berhasil edit data"),a.props.history.push("/entitas/agen")})).catch((function(e){alert("error"),console.log(e)}))}},{key:"handleChange",value:function(e,a){var t=this.state.fields;t[e]=a.target.value,this.setState({fields:t})}},{key:"render",value:function(){var e=this;return console.log(this.state.dataPo),c.a.createElement("div",{className:"content-wrapper"},c.a.createElement("div",{className:"content-header"},c.a.createElement("div",{className:"container-fluid header-fluid"},c.a.createElement("div",{className:"row mb-2"},c.a.createElement("div",{className:"col-sm-6"},c.a.createElement("ol",{className:"breadcrumb float-sm-left"},c.a.createElement("li",{className:"breadcrumb-item"},c.a.createElement("a",{href:"# "},c.a.createElement("b",null,"Home"))),c.a.createElement("li",{className:"breadcrumb-item active"},c.a.createElement("b",null,"Edit Agen"))))))),c.a.createElement("section",{class:"content"},c.a.createElement("div",{class:"container-fluid"},c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"col-md-12"},c.a.createElement("div",{class:"card card-primary"},c.a.createElement("div",{class:"card-header"},c.a.createElement("h3",{class:"card-title"},"Edit Agen")),c.a.createElement("form",{onSubmit:this.tambahData.bind(this)},c.a.createElement("div",{class:"card-body"},c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Pilih P.O"),c.a.createElement(d.a,{name:"po",value:this.state.dataPo.map((function(a){return e.OptionPo(a)})).filter((function(a){return a.value===e.state.idPo})),onChange:this.handleChangePo,closeMenuOnSelect:!1,placeholder:"Pilih P.O",options:this.state.dataPo.map((function(a){return e.OptionPo(a)}))})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"P.O Terpilih"),c.a.createElement("div",{className:"lintasan"},this.state.pos.map((function(a,t){return c.a.createElement("span",null,c.a.createElement("i",{class:"btn btn-city btn-xs"},a.nama,"\xa0\xa0\xa0",c.a.createElement("span",{onClick:e.removePo.bind(e,t)},"\xd7"),c.a.createElement("br",null)),c.a.createElement("span",{class:"strip"}," \xa0\xa0\xa0 "))})))),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Pilih Wilayah"),c.a.createElement(d.a,{name:"wilayah",placeholder:"Pilih Wilayah",value:this.state.dataWilayah.map((function(a){return e.OptionWilayah(a)})).filter((function(a){return a.value===e.state.idWilayah})),onChange:this.handleChangeWilayah,options:this.state.dataWilayah.map((function(a){return e.OptionWilayah(a)}))})),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Pilih Lokasi"),c.a.createElement(d.a,{name:"lokasi",placeholder:"Pilih Lokasi",value:this.state.dataLokasi.map((function(a){return e.OptionLokasi(a)})).filter((function(a){return a.value===e.state.idLokasi})),onChange:this.handleChangeLokasi,options:this.state.dataLokasi.map((function(a){return e.OptionLokasi(a)}))})),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Nama Agen"),c.a.createElement("input",{className:"form-control",type:"text",name:"namaAgen",value:this.state.namaAgen,onChange:this.handleChange}),c.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.namaAgen," "),c.a.createElement("br",null)),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"No. Telepon"),c.a.createElement("input",{className:"form-control",type:"number",name:"nomorTelpon",value:this.state.nomorTelpon,onChange:this.handleChange}),c.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.nomorTelpon," "),c.a.createElement("br",null)),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Longitude"),c.a.createElement("input",{className:"form-control",type:"text",name:"longitude",value:this.state.longitude,onChange:this.handleChange}),c.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.longitude," "),c.a.createElement("br",null)),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Latitude"),c.a.createElement("input",{className:"form-control",type:"text",name:"latitude",value:this.state.latitude,onChange:this.handleChange}),c.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.latitude," "),c.a.createElement("br",null)),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Status Aktif"),c.a.createElement("div",{className:"radio"},c.a.createElement("input",{type:"radio",name:"status",value:"true",checked:this.state.status,onChange:this.handleChangeStatus})," Ya \xa0\xa0\xa0",c.a.createElement("input",{type:"radio",name:"status",value:"false",checked:!this.state.status,onChange:this.handleChangeStatus})," Tidak \xa0\xa0\xa0")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Tempat Berangkat"),c.a.createElement("div",{className:"radio"},c.a.createElement("input",{type:"radio",name:"tempatBerangkat",value:"true",checked:this.state.tempatBerangkat,onChange:this.handleChangeBerangkat})," Ya \xa0\xa0\xa0",c.a.createElement("input",{type:"radio",name:"tempatBerangkat",value:"false",checked:!this.state.tempatBerangkat,onChange:this.handleChangeBerangkat})," Tidak \xa0\xa0\xa0"),c.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.tempatBerangkat," "),c.a.createElement("br",null)),c.a.createElement("div",{class:"form-group"},c.a.createElement("label",null,"Pilih Logo"),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-4"}),c.a.createElement("div",{className:"col-4 text-center"},this.state.imgLogo?[this.state.imgLogo].map((function(e){return c.a.createElement("img",{src:URL.createObjectURL(e),alt:"",width:"150",height:"50"})})):c.a.createElement("img",{src:this.state.logo,alt:"",width:"150",height:"50"}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("span",{className:"btn btn-dark",onClick:function(){return e.inputFileLogo()}},"Upload Logo"),c.a.createElement("input",{ref:this.fileInputLogo,type:"file",onChange:this.onChangeLogo,hidden:!0}),c.a.createElement("br",null),c.a.createElement("br",null)),c.a.createElement("div",{className:"col-4"})))),c.a.createElement("div",{class:"card-footer"},c.a.createElement("button",{type:"submit",class:"btn btn-primary"},"Edit")))))))))}}]),t}(r.Component)},33:function(e,a,t){"use strict";var n=t(36),l=t.n(n),i=localStorage.getItem("token"),o=l.a.create({baseURL:"http://po.bisku.id:8282",headers:{Authorization:"Bearer "+i}});a.a=o},38:function(e,a,t){"use strict";function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,"a",(function(){return n}))}}]);
//# sourceMappingURL=21.83c204cf.chunk.js.map