(this.webpackJsonpreactjs_adminlte=this.webpackJsonpreactjs_adminlte||[]).push([[35],{325:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));var n=a(51),l=a(11),r=a(12),s=a(14),o=a(13),c=a(0),i=a.n(c),m=a(37),d=a(50),u=a.n(d),h=(a(48),a(49)),p=a.n(h),E=a(33),b=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).handleChangeDateTglLahir=function(e){r.setState({dateTglLahir:e})},r.inputFileLogo=function(){void 0!==r.fileInputLogo.current&&void 0!==r.fileInputLogo.current.click&&r.fileInputLogo.current.click()},r.onChangeLogo=function(e){r.setState({imgLogo:e.target.files[0]})},r.changePo=function(e){r.setState({idPo:e.target.value});var t=e.target.value;E.a.get("/admin/bus/"+t).then((function(e){r.setState({dataBus:e.data})}))},r.OptionRole=function(e){return{value:e.name,label:e.name}},r.handleChangeRole=function(e){r.setState({namaRol:e.value});var t=e.value,a=!1;if(r.state.dataRoles.length>0){for(var n=0;n<r.state.dataRoles.length;n++)r.state.dataRoles[n].role===t&&(a=!0,r.setState({ada:a}),n=r.state.dataRoles.length);if(!a){var l=r.state.dataRoles;l.push({role:e.value,idTabel:r.state.selectedPo}),r.setState({dataRoles:l})}}else{var s=r.state.dataRoles;s.push({role:e.value,idTabel:r.state.selectedPo}),r.setState({dataRoles:s})}console.log(r.state.dataRoles)},r.removeRole=function(e){var t=Object(n.a)(r.state.dataRoles);t.splice(e,1),r.setState({dataRoles:t},(function(){console.log(r.state.dataRoles)}))},r.OptionPoLoket=function(e){return{value:e.idPo,label:e.nama}},r.handleChangePoLoket=function(e){r.setState({selectedPoLoket:e.value});var t={idPo:e.value,orderBy:"idPo",pageNo:0,pageRow:100};E.a.post("/admin/loket/list",t).then((function(e){console.log(e.data.content),r.setState({dataLoket:e.data.content})}))},r.OptionPoCrew=function(e){return{value:e.idPo,label:e.nama}},r.handleChangePoCrew=function(e){r.setState({selectedPoCrew:e.value}),E.a.get("/admin/bus/listAll/"+e.value).then((function(e){r.setState({dataBusCrew:e.data})}))},r.handleChangePos=function(e,t){var a=Object(n.a)(r.state.dataRoles);a[t].idTabel=e.target.value,r.setState({dataRoles:a})},r.handleChangeCrew=function(e,t){var a=Object(n.a)(r.state.dataRoles);a[t].idTabel=e.target.value,r.setState({dataRoles:a})},r.handleChangeLoket=function(e,t){var a=Object(n.a)(r.state.dataRoles);a[t].idTabel=e.target.value,r.setState({dataRoles:a})},r.fileInputLogo=i.a.createRef(),r.state={dataPo:[],dataRole:[],dataRoles:[],dataLoket:[],dataBusCrew:[],dataBus:{},ada:!1,roles:"",dateTglLahir:"",fields:{},errors:{}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.endpointPo(),this.endpointRole()}},{key:"endpointPo",value:function(){var e=this;E.a.get("/admin/po/getAll").then((function(t){e.setState({dataPo:t.data})}))}},{key:"endpointRole",value:function(){var e=this;E.a.get("/admin/role/list").then((function(t){e.setState({dataRole:t.data})}))}},{key:"handleValidation",value:function(){var e=this.state.fields,t={},a=!0;return e.name||(a=!1,t.name="Tidak boleh kosong"),e.password||(a=!1,t.password="Tidak boleh kosong"),e.email||(a=!1,t.email="Tidak boleh kosong"),e.gender||(a=!1,t.gender="Tidak boleh kosong"),e.idfb||(a=!1,t.idfb="Tidak boleh kosong"),e.idgplus||(a=!1,t.idgplus="Tidak boleh kosong"),this.state.dateTglLahir||(a=!1,t.tglLahir="Tidak boleh kosong"),e.nohp||(a=!1,t.nohp="Tidak boleh kosong"),this.setState({errors:t}),a}},{key:"handleChange",value:function(e,t){var a=this.state.fields;a[e]=t.target.value,this.setState({fields:a})}},{key:"tambahData",value:function(e){var t=this;e.preventDefault();var a=p()(this.state.dateTglLahir).format("YYYY-MM-DD"),n={email:this.state.fields.email,gender:this.state.fields.gender,idfb:this.state.fields.idfb,idgplus:this.state.fields.idgplus,name:this.state.fields.name,nohp:this.state.fields.nohp,password:this.state.fields.password,role:this.state.dataRoles,tglLahir:a};console.log(n),this.handleValidation()&&E.a.post("/admin/user/add",n).then((function(e){alert(e.data.message),t.props.history.push("/user/daftarPengguna")})).catch((function(e){alert("error")}))}},{key:"render",value:function(){var e,t=this;return"ROLE_PO"===this.state.namaRol?e=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Daftar P.O"),i.a.createElement("table",{className:"table table-bordered text-nowrap"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"ID TABEL"),i.a.createElement("th",{className:"text-center"},"Nama P.O"))),i.a.createElement("tbody",null,this.state.dataPo.map((function(e){return i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center"},e.idPo),i.a.createElement("td",{className:"text-center"},e.nama))}))))):"ROLE_LOKET"===this.state.namaRol?e=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Pilih P.O"),i.a.createElement(m.a,{name:"po",placeholder:"Pilih P.O",onChange:this.handleChangePoLoket,options:this.state.dataPo.map((function(e){return t.OptionPoLoket(e)}))}),this.state.selectedPoLoket&&i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Daftar Loket"),i.a.createElement("table",{className:"table table-bordered text-nowrap"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"ID TABEL"),i.a.createElement("th",{className:"text-center"},"Nama Loket"))),i.a.createElement("tbody",null,this.state.dataLoket.map((function(e){return i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center"},e.id),i.a.createElement("td",{className:"text-center"},e.nama))})))))):"ROLE_CREW"===this.state.namaRol&&(e=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Pilih P.O"),i.a.createElement(m.a,{name:"po",placeholder:"Pilih P.O",onChange:this.handleChangePoCrew,options:this.state.dataPo.map((function(e){return t.OptionPoCrew(e)}))}),this.state.selectedPoCrew&&i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Daftar Bus"),i.a.createElement("table",{className:"table table-bordered text-nowrap"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"ID TABEL"),i.a.createElement("th",{className:"text-center"},"Nama Bus"))),i.a.createElement("tbody",null,this.state.dataBusCrew.map((function(e){return i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center"},e.idBus),i.a.createElement("td",{className:"text-center"},e.id))}))))))),i.a.createElement("div",{className:"content-wrapper"},i.a.createElement("div",{className:"content-header"},i.a.createElement("div",{className:"container-fluid header-fluid"},i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("ol",{className:"breadcrumb float-sm-left"},i.a.createElement("li",{className:"breadcrumb-item"},i.a.createElement("a",{href:"# "},i.a.createElement("b",null,"Home"))),i.a.createElement("li",{className:"breadcrumb-item active"},i.a.createElement("b",null,"Tambah Pengguna"))))))),i.a.createElement("section",{class:"content"},i.a.createElement("div",{class:"container-fluid"},i.a.createElement("div",{class:"row"},i.a.createElement("div",{class:"col-md-12"},i.a.createElement("div",{class:"card card-primary"},i.a.createElement("div",{class:"card-header"},i.a.createElement("h3",{class:"card-title"},"Tambah Pengguna")),i.a.createElement("form",{onSubmit:this.tambahData.bind(this)},i.a.createElement("div",{class:"card-body"},i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"No Handphone (Default Username)"),i.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange.bind(this,"nohp")}),i.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.nohp," "),i.a.createElement("br",null)),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Nama Pengguna"),i.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange.bind(this,"name")}),i.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.name," "),i.a.createElement("br",null)),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Password"),i.a.createElement("input",{className:"form-control",type:"text",name:"password",onChange:this.handleChange.bind(this,"password")}),i.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.password," "),i.a.createElement("br",null)),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Pilih Role"),i.a.createElement(m.a,{name:"role",placeholder:"Pilih Role",onChange:this.handleChangeRole,options:this.state.dataRole.map((function(e){return t.OptionRole(e)}))})),i.a.createElement("div",null,e),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Role Terpilih"),i.a.createElement("div",{className:"lintasan"},this.state.dataRoles.map((function(e,a){return"ROLE_PO"===e.role?i.a.createElement("span",null,i.a.createElement("i",{class:"btn btn-city btn-xs"},e.role,"\xa0\xa0\xa0",i.a.createElement("span",{onClick:t.removeRole.bind(t,a)},"\xd7"),i.a.createElement("br",null),i.a.createElement("input",{class:"form-control",type:"number",onChange:function(e){return t.handleChangePos(e,a)},name:"urutan",placeholder:"Input ID Tabel"})),i.a.createElement("span",{class:"strip"}," \xa0\xa0\xa0\xa0\xa0 ")):"ROLE_USER"===e.role||"ROLE_ADMIN"===e.role||"ROLE_AGEN"===e.role||"ROLE_PARTNER"===e.role?i.a.createElement("span",null,i.a.createElement("i",{class:"btn btn-city btn-xs"},e.role,"\xa0\xa0\xa0",i.a.createElement("span",{onClick:t.removeRole.bind(t,a)},"\xd7"),i.a.createElement("br",null)),i.a.createElement("span",{class:"strip"}," \xa0\xa0\xa0\xa0\xa0 ")):t.state.selectedPoCrew?i.a.createElement("span",null,i.a.createElement("i",{class:"btn btn-city btn-xs"},e.role,"\xa0\xa0\xa0",i.a.createElement("span",{onClick:t.removeRole.bind(t,a)},"\xd7"),i.a.createElement("br",null),i.a.createElement("input",{class:"form-control",type:"number",onChange:function(e){return t.handleChangeCrew(e,a)},name:"urutan",placeholder:"Input ID Tabel"})),i.a.createElement("span",{class:"strip"}," \xa0\xa0\xa0\xa0\xa0 ")):t.state.selectedPoLoket?i.a.createElement("span",null,i.a.createElement("i",{class:"btn btn-city btn-xs"},e.role,"\xa0\xa0\xa0",i.a.createElement("span",{onClick:t.removeRole.bind(t,a)},"\xd7"),i.a.createElement("br",null),i.a.createElement("input",{class:"form-control",type:"number",onChange:function(e){return t.handleChangeLoket(e,a)},name:"urutan",placeholder:"Input ID Tabel"})),i.a.createElement("span",{class:"strip"}," \xa0\xa0\xa0\xa0\xa0 ")):i.a.createElement("div",null)})))),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Jenis Kelamin"),i.a.createElement("div",{className:"radio"},i.a.createElement("input",{type:"radio",name:"gender",value:"Laki-laki",onChange:this.handleChange.bind(this,"gender")})," Laki-laki \xa0\xa0\xa0",i.a.createElement("input",{type:"radio",name:"gender",value:"Perempuan",onChange:this.handleChange.bind(this,"gender")})," Perempuan \xa0\xa0\xa0"),i.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.gender," "),i.a.createElement("br",null)),i.a.createElement("div",{class:"form-group customDatePickerWidth"},i.a.createElement("label",null,"Tanggal Lahir"),i.a.createElement(u.a,{className:"form-control",dateFormat:"dd-MM-yyyy",placeholderText:"Tanggal Lahir",selected:this.state.dateTglLahir,onChange:this.handleChangeDateTglLahir}),i.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.tglLahir," "),i.a.createElement("br",null)),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Email"),i.a.createElement("input",{className:"form-control",type:"email",onChange:this.handleChange.bind(this,"email")}),i.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.email," "),i.a.createElement("br",null)),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"Facebook ID"),i.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange.bind(this,"idfb")}),i.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.idfb," "),i.a.createElement("br",null)),i.a.createElement("div",{class:"form-group"},i.a.createElement("label",null,"G-Plus ID"),i.a.createElement("input",{className:"form-control",type:"text",onChange:this.handleChange.bind(this,"idgplus")}),i.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.idgplus," "),i.a.createElement("br",null))),i.a.createElement("div",{class:"card-footer"},i.a.createElement("button",{type:"submit",class:"btn btn-primary"},"Tambah")))))))))}}]),a}(c.Component)},33:function(e,t,a){"use strict";var n=a(36),l=a.n(n),r=localStorage.getItem("token"),s=l.a.create({baseURL:"http://po.bisku.id:8282",headers:{Authorization:"Bearer "+r}});t.a=s},51:function(e,t,a){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function l(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a.d(t,"a",(function(){return l}))}}]);
//# sourceMappingURL=35.33515428.chunk.js.map