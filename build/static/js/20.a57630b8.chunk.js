(this.webpackJsonpreactjs_adminlte=this.webpackJsonpreactjs_adminlte||[]).push([[20],{326:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return h}));var n=t(51),l=t(38),r=t(11),s=t(12),o=t(14),i=t(13),c=t(0),d=t.n(c),m=t(37),u=t(33),h=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(e){var s;return Object(r.a)(this,t),(s=a.call(this,e)).handleChangeEdit=function(e){s.setState(Object(l.a)({},e.target.name,e.target.value))},s.handleChangeGenderLaki=function(e){s.setState(Object(l.a)({},e.target.name,s.state.genderLaki))},s.handleChangeGenderPerempuan=function(e){s.setState(Object(l.a)({},e.target.name,s.state.genderPerempuan))},s.OptionRole=function(e){return{value:e.name,label:e.name}},s.handleChangeRole=function(e){s.setState({namaRol:e.value});var a=e.value,t=!1;if(s.state.dataRoles.length>0){for(var n=0;n<s.state.dataRoles.length;n++)s.state.dataRoles[n].role===a&&(t=!0,s.setState({ada:t}),n=s.state.dataRoles.length);if(!t){var l=s.state.dataRoles;l.push({role:e.value,idTabel:s.state.selectedPo}),s.setState({dataRoles:l})}}else{var r=s.state.dataRoles;r.push({role:e.value,idTabel:s.state.selectedPo}),s.setState({dataRoles:r})}},s.removeRole=function(e){var a=s.state.dataRoles;e>-1&&(a.splice(e,1),s.setState({dataRoles:a}))},s.OptionPo=function(e){return{value:e.idPo,label:e.nama}},s.handleChangePo=function(e){s.setState({selectedPo:e.value})},s.OptionPoLoket=function(e){return{value:e.idPo,label:e.nama}},s.handleChangePoLoket=function(e){s.setState({selectedPoLoket:e.value});var a={idPo:e.value,orderBy:"idPo",pageNo:0,pageRow:100};u.a.post("/admin/loket/list",a).then((function(e){console.log(e.data.content),s.setState({dataLoket:e.data.content})}))},s.OptionPoCrew=function(e){return{value:e.idPo,label:e.nama}},s.handleChangePoCrew=function(e){s.setState({selectedPoCrew:e.value}),u.a.get("/admin/bus/listAll/"+e.value).then((function(e){s.setState({dataBusCrew:e.data})}))},s.handleChangePos=function(e,a){console.log(e.target.value);var t=Object(n.a)(s.state.dataRoles);t[a].idTabel=e.target.value,s.setState({dataRoles:t})},s.handleChangeCrew=function(e,a){console.log(e.target.value);var t=Object(n.a)(s.state.dataRoles);t[a].idTabel=e.target.value,s.setState({dataRoles:t})},s.handleChangeLoket=function(e,a){var t=Object(n.a)(s.state.dataRoles);t[a].idTabel=e.target.value,s.setState({dataRoles:t})},s.state={dataRole:[],dataRoles:[],details:[],dataUser:[],dataPo:[],dataBusByIdPo:[],dataBusCrew:[],dataLoket:[],genderLaki:"Laki-laki",genderPerempuan:"Perempuan",fields:{},errors:{}},s}return Object(s.a)(t,[{key:"componentDidMount",value:function(){this.endpointUserById(),this.endpointRole(),this.endpointAllPo()}},{key:"endpointAllPo",value:function(){var e=this;u.a.get("/admin/po/getAll").then((function(a){e.setState({dataPo:a.data})}))}},{key:"endpointRole",value:function(){var e=this;u.a.get("/admin/role/list").then((function(a){e.setState({dataRole:a.data})}))}},{key:"endpointUserById",value:function(){var e=this;u.a.get("/admin/user/get/?idUser="+this.props.match.params.idUser).then((function(a){e.setState({dataUser:a.data,nohp:a.data.nohp,name:a.data.name,password:a.data.password,gender:a.data.gender,tglLahir:a.data.tglLahir,email:a.data.email,idfb:a.data.idfb,idgplus:a.data.idgplus,details:a.data.details});var t=[];e.state.details.forEach((function(e){t.push(e.role)})),e.setState({dataRol:t});var n=e.state.details;e.setState({dataRoles:n},(function(){console.log(e.state.dataRoles)}))})).catch((function(e){alert(e.response.data.message)}))}},{key:"handleValidation",value:function(){var e=this.state.fields,a={},t=!0;return e.name||(t=!1,a.name="Tidak boleh kosong"),e.password||(t=!1,a.password="Tidak boleh kosong"),e.email||(t=!1,a.email="Tidak boleh kosong"),e.gender||(t=!1,a.gender="Tidak boleh kosong"),e.idfb||(t=!1,a.idfb="Tidak boleh kosong"),e.idgplus||(t=!1,a.idgplus="Tidak boleh kosong"),e.tglLahir||(t=!1,a.tglLahir="Tidak boleh kosong"),e.nohp||(t=!1,a.nohp="Tidak boleh kosong"),this.setState({errors:a}),t}},{key:"handleChange",value:function(e,a){var t=this.state.fields;t[e]=a.target.value,this.setState({fields:t})}},{key:"tambahData",value:function(e){var a=this;e.preventDefault();var t={idUser:this.props.match.params.idUser,email:this.state.email,gender:this.state.gender,idfb:this.state.idfb,idgplus:this.state.idgplus,name:this.state.name,nohp:this.state.nohp,role:this.state.dataRoles,tglLahir:this.state.tglLahir};console.log(t),u.a.put("/admin/user/edit",t).then((function(e){alert(e.data.message),a.props.history.push("/user/daftarPengguna")})).catch((function(e){alert(e.response.data.message)}))}},{key:"render",value:function(){var e,a=this;return"ROLE_PO"===this.state.namaRol?e=d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Daftar P.O"),d.a.createElement("table",{className:"table table-bordered text-nowrap"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{className:"text-center"},"ID TABEL"),d.a.createElement("th",{className:"text-center"},"Nama P.O"))),d.a.createElement("tbody",null,this.state.dataPo.map((function(e){return d.a.createElement("tr",null,d.a.createElement("td",{className:"text-center"},e.idPo),d.a.createElement("td",{className:"text-center"},e.nama))}))))):"ROLE_LOKET"===this.state.namaRol?e=d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Pilih P.O"),d.a.createElement(m.a,{name:"po",placeholder:"Pilih P.O",onChange:this.handleChangePoLoket,options:this.state.dataPo.map((function(e){return a.OptionPoLoket(e)}))}),this.state.selectedPoLoket&&d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Daftar Loket"),d.a.createElement("table",{className:"table table-bordered text-nowrap"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{className:"text-center"},"ID TABEL"),d.a.createElement("th",{className:"text-center"},"Nama Loket"))),d.a.createElement("tbody",null,this.state.dataLoket.map((function(e){return d.a.createElement("tr",null,d.a.createElement("td",{className:"text-center"},e.id),d.a.createElement("td",{className:"text-center"},e.nama))})))))):"ROLE_CREW"===this.state.namaRol&&(e=d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Pilih P.O"),d.a.createElement(m.a,{name:"po",placeholder:"Pilih P.O",onChange:this.handleChangePoCrew,options:this.state.dataPo.map((function(e){return a.OptionPoCrew(e)}))}),this.state.selectedPoCrew&&d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Daftar Bus"),d.a.createElement("table",{className:"table table-bordered text-nowrap"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{className:"text-center"},"ID TABEL"),d.a.createElement("th",{className:"text-center"},"Nama Bus"))),d.a.createElement("tbody",null,this.state.dataBusCrew.map((function(e){return d.a.createElement("tr",null,d.a.createElement("td",{className:"text-center"},e.idBus),d.a.createElement("td",{className:"text-center"},e.id))}))))))),d.a.createElement("div",{className:"content-wrapper"},d.a.createElement("div",{className:"content-header"},d.a.createElement("div",{className:"container-fluid header-fluid"},d.a.createElement("div",{className:"row mb-2"},d.a.createElement("div",{className:"col-sm-6"},d.a.createElement("ol",{className:"breadcrumb float-sm-left"},d.a.createElement("li",{className:"breadcrumb-item"},d.a.createElement("a",{href:"# "},d.a.createElement("b",null,"Home"))),d.a.createElement("li",{className:"breadcrumb-item active"},d.a.createElement("b",null,"Edit Pengguna"))))))),d.a.createElement("section",{class:"content"},d.a.createElement("div",{class:"container-fluid"},d.a.createElement("div",{class:"row"},d.a.createElement("div",{class:"col-md-12"},d.a.createElement("div",{class:"card card-primary"},d.a.createElement("div",{class:"card-header"},d.a.createElement("h3",{class:"card-title"},"Edit Pengguna")),d.a.createElement("form",{onSubmit:this.tambahData.bind(this)},d.a.createElement("div",{class:"card-body"},d.a.createElement("div",{class:"form-group"},d.a.createElement("label",null,"No Handphone (Default Username)"),d.a.createElement("input",{className:"form-control",type:"text",name:"nohp",value:this.state.nohp,onChange:this.handleChangeEdit})),d.a.createElement("div",{class:"form-group"},d.a.createElement("label",null,"Nama Pengguna"),d.a.createElement("input",{className:"form-control",type:"text",name:"name",value:this.state.name,onChange:this.handleChangeEdit})),d.a.createElement("div",{class:"form-group"},d.a.createElement("label",null,"Pilih Role"),d.a.createElement(m.a,{name:"role",placeholder:"Pilih Role",onChange:this.handleChangeRole,options:this.state.dataRole.map((function(e){return a.OptionRole(e)}))})),d.a.createElement("div",null,e),d.a.createElement("div",{className:"form-group"},d.a.createElement("label",null,"Role Terpilih"),d.a.createElement("div",{className:"lintasan"},this.state.dataRoles.map((function(e,t){return"ROLE_PO"===e.role?d.a.createElement("span",null,d.a.createElement("i",{class:"btn btn-city btn-xs"},e.role,"\xa0\xa0\xa0",d.a.createElement("span",{onClick:a.removeRole.bind(a,t)},"\xd7"),d.a.createElement("br",null),d.a.createElement("input",{class:"form-control",type:"number",onChange:function(e){return a.handleChangePos(e,t)},value:e.idTabel,name:"urutan",placeholder:"Input ID Tabel"})),d.a.createElement("span",{class:"strip"}," \xa0\xa0\xa0\xa0\xa0 ")):"ROLE_USER"===e.role||"ROLE_ADMIN"===e.role||"ROLE_AGEN"===e.role||"ROLE_PARTNER"===e.role?d.a.createElement("span",null,d.a.createElement("i",{class:"btn btn-city btn-xs"},e.role,"\xa0\xa0\xa0",d.a.createElement("span",{onClick:a.removeRole.bind(a,t)},"\xd7"),d.a.createElement("br",null)),d.a.createElement("span",{class:"strip"}," \xa0\xa0\xa0\xa0\xa0 ")):a.state.selectedPoCrew||"ROLE_CREW"===e.role?d.a.createElement("span",null,d.a.createElement("i",{class:"btn btn-city btn-xs"},e.role,"\xa0\xa0\xa0",d.a.createElement("span",{onClick:a.removeRole.bind(a,t)},"\xd7"),d.a.createElement("br",null),d.a.createElement("input",{class:"form-control",type:"number",value:e.idTabel,onChange:function(e){return a.handleChangeCrew(e,t)},name:"urutan",placeholder:"Input ID Tabel"})),d.a.createElement("span",{class:"strip"}," \xa0\xa0\xa0\xa0\xa0 ")):a.state.selectedPoLoket||"ROLE_LOKET"===e.role?d.a.createElement("span",null,d.a.createElement("i",{class:"btn btn-city btn-xs"},e.role,"\xa0\xa0\xa0",d.a.createElement("span",{onClick:a.removeRole.bind(a,t)},"\xd7"),d.a.createElement("br",null),d.a.createElement("input",{class:"form-control",type:"number",value:e.idTabel,onChange:function(e){return a.handleChangeLoket(e,t)},name:"urutan",placeholder:"Input ID Tabel"})),d.a.createElement("span",{class:"strip"}," \xa0\xa0\xa0\xa0\xa0 ")):d.a.createElement("div",null)})))),d.a.createElement("div",{class:"form-group"},d.a.createElement("label",null,"Jenis Kelamin"),d.a.createElement("div",{className:"radio"},d.a.createElement("input",{type:"radio",name:"gender",value:this.state.gender,checked:"Laki-laki"===this.state.gender,onChange:this.handleChangeGenderLaki})," Laki-laki \xa0\xa0\xa0",d.a.createElement("input",{type:"radio",name:"gender",value:this.state.gender,checked:"Perempuan"===this.state.gender,onChange:this.handleChangeGenderPerempuan})," Perempuan \xa0\xa0\xa0"),d.a.createElement("span",{style:{color:"red"}}," ",this.state.errors.gender," "),d.a.createElement("br",null)),d.a.createElement("div",{class:"form-group"},d.a.createElement("label",null,"Tanggal Lahir"),d.a.createElement("input",{className:"form-control",type:"date",name:"tglLahir",value:this.state.tglLahir,onChange:this.handleChangeEdit})),d.a.createElement("div",{class:"form-group"},d.a.createElement("label",null,"Email"),d.a.createElement("input",{className:"form-control",type:"email",name:"email",value:this.state.email,onChange:this.handleChangeEdit})),d.a.createElement("div",{class:"form-group"},d.a.createElement("label",null,"Facebook ID"),d.a.createElement("input",{className:"form-control",type:"text",name:"idfb",value:this.state.idfb,onChange:this.handleChangeEdit})),d.a.createElement("div",{class:"form-group"},d.a.createElement("label",null,"G-Plus ID"),d.a.createElement("input",{className:"form-control",type:"text",name:"idgplus",value:this.state.idgplus,onChange:this.handleChangeEdit}))),d.a.createElement("div",{class:"card-footer"},d.a.createElement("button",{type:"submit",class:"btn btn-primary"},"Edit")))))))))}}]),t}(c.Component)},33:function(e,a,t){"use strict";var n=t(36),l=t.n(n),r=localStorage.getItem("token"),s=l.a.create({baseURL:"http://po.bisku.id:8282",headers:{Authorization:"Bearer "+r}});a.a=s},38:function(e,a,t){"use strict";function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,"a",(function(){return n}))},51:function(e,a,t){"use strict";function n(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function l(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,a){if(e){if("string"===typeof e)return n(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(a,"a",(function(){return l}))}}]);
//# sourceMappingURL=20.a57630b8.chunk.js.map