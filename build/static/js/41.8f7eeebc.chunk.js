(this.webpackJsonpreactjs_adminlte=this.webpackJsonpreactjs_adminlte||[]).push([[41],{33:function(e,a,t){"use strict";var n=t(36),l=t.n(n),s=localStorage.getItem("token"),r=l.a.create({baseURL:"http://po.bisku.id:8282",headers:{Authorization:"Bearer "+s}});a.a=r},347:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return C}));var n=t(11),l=t(12),s=t(14),r=t(13),c=t(0),i=t.n(c),o=t(15),m=t(37),d=t(50),u=t.n(d),h=(t(48),t(49)),E=t.n(h),p=t(33),f=t(142),g=t(336),v=t(319),b=t(320),T=t(321),N=function(){return i.a.createElement("div",{class:"loader"},i.a.createElement("div",{class:"bar"}))},y=function(e){Object(s.a)(t,e);var a=Object(r.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).hideLoader=function(){l.setState({loading:!1})},l.showLoader=function(){l.setState({loading:!0})},l.toggle=function(e,a){l.setState({modal:!0,dataDetail:e,dataDetail2:e.detail2})},l.modalTagihan=function(){l.setState({modalTagihans:!0})},l.closeModal=function(){l.setState({modal:!1})},l.closeModalTagihan=function(){l.setState({modalTagihans:!1})},l.endpointPo=function(){p.a.get("/admin/po/getAll").then((function(e){l.setState({dataPo:e.data})}))},l.totalPnpTunai=function(){var e=0;return l.props.dataTransaksi.forEach((function(a){e+=a.jmlPnpTunai})),e},l.totalBayarTunai=function(){var e=0;return l.props.dataTransaksi.forEach((function(a){e+=a.jmlBayarTunai})),e},l.totalMdrTunai=function(){var e=0;return l.props.dataTransaksi.forEach((function(a){e+=a.mdrTunai})),e},l.totalPnpEmoney=function(){var e=0;return l.props.dataTransaksi.forEach((function(a){e+=a.jmlPnpEmoney})),e},l.totalBayarEmoney=function(){var e=0;return l.props.dataTransaksi.forEach((function(a){e+=a.jmlBayarEmoney})),e},l.totalMdrEmoney=function(){var e=0;return l.props.dataTransaksi.forEach((function(a){e+=a.mdrTap})),e},l.totalPnpQris=function(){var e=0;return l.props.dataTransaksi.forEach((function(a){e+=a.jmlPnpQris})),e},l.totalBayarQris=function(){var e=0;return l.props.dataTransaksi.forEach((function(a){e+=a.jmlBayarQris})),e},l.totalMdrQris=function(){var e=0;return l.props.dataTransaksi.forEach((function(a){e+=a.mdrQRIS})),e},l.OptionPo=function(e){return{value:e.idPo,label:e.nama}},l.handleChangePo=function(e){l.setState({idPo:e.value})},l.OptionTypeBus=function(e){return{value:e.id,label:e.nama}},l.handleChangeTypeBus=function(e){l.setState({idTypeBus:e.value})},l.handleChangeStartDate=function(e){l.setState({startDate:e})},l.handleChangeEndDate=function(e){l.setState({endDate:e})},l.getDataTransaksi=function(e){e.preventDefault();var a=E()(l.state.startDate).format("YYYY-MM-DD"),t=E()(l.state.endDate).format("YYYY-MM-DD");l.showLoader(),p.a.get("/admin/invoice/setoran/po?idPo="+l.state.idPo+"&tglAkhir="+t+"&tglAwal="+a+"&type="+l.state.idTypeBus).then((function(e){0!==e.data.data.length?l.setState({dataIsi:!0,listDataTransaksi:e.data.data}):l.setState({dataKosong:!0}),l.hideLoader()}))},l.changeInvoice=function(e){l.setState({dataInvoice:e.target.value})},l.changeKeterangan=function(e){l.setState({dataKeterangan:e.target.value})},l.prosesTagihan=function(e){e.preventDefault();var a={idPo:l.props.idPo,invoice:l.state.dataInvoice,jumlahMDR:l.totalMdrTunai(),jumlahRp:l.totalBayarTunai(),keterangan:l.state.dataKeterangan,tglAkhir:E()(l.props.tglAkhir).format("YYYY-MM-DD"),tglAwal:E()(l.props.tglAwal).format("YYYY-MM-DD"),typeBus:l.props.typeBus};console.log(a),p.a.post("/admin/invoice/tagihan/po",a).then((function(e){alert(e.data.message),console.log(e.data.message)})).catch((function(e){alert("error")}))},l.state={loading:!1,dataKosong:!1,dataIsi:!1,modal:!1,modalTagihans:!1,startDate:"",endDate:"",dataPo:[],dataDetail:{},dataDetail2:[],dataTypeBus:[{id:"0",nama:"ALL"},{id:"1",nama:"JAC"},{id:"2",nama:"JRC"},{id:"3",nama:"TJR"}]},l}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.endpointPo()}},{key:"render",value:function(){var e=this;if(this.state.dataKosong)return i.a.createElement(P,{id:this.state.idProvinsi});if(this.state.dataIsi)return i.a.createElement(t,{dataTransaksi:this.state.listDataTransaksi,idPo:this.state.idPo,tglAwal:this.state.startDate,tglAkhir:this.state.endDate,typeBus:this.state.idTypeBus});var a=new Intl.NumberFormat;return i.a.createElement("div",null,i.a.createElement("div",{className:"content-wrapper"},i.a.createElement("div",{className:"content-header"},i.a.createElement("div",{className:"container-fluid header-fluid"},i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("ol",{className:"breadcrumb float-sm-left"},i.a.createElement("li",{className:"breadcrumb-item"},i.a.createElement("a",{href:"# "},i.a.createElement("b",null,"Home"))),i.a.createElement("li",{className:"breadcrumb-item active"},i.a.createElement("b",null,"Transaksi"))))))),i.a.createElement("div",{class:"container-fluid"},i.a.createElement("div",{class:"col-md-12"},i.a.createElement("div",{class:"card"},i.a.createElement("div",{class:"card-body",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("div",{class:"col-6 main-menu"},i.a.createElement(o.b,{to:"/bumel/transaksiTunai"},i.a.createElement("div",{class:"menu"},"Tunai"))),i.a.createElement("div",{class:"col-6 main-menu"},i.a.createElement(o.b,{to:"/bumel/transaksiNonTunai"},i.a.createElement("div",{class:"menu disabled"},"Non Tunai"))))))),i.a.createElement("section",{className:"content"},i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-2"},i.a.createElement(m.a,{name:"po",placeholder:"Pilih P.O",onChange:this.handleChangePo,options:this.state.dataPo.map((function(a){return e.OptionPo(a)}))}),i.a.createElement("br",null)),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(u.a,{className:"form-control",placeholderText:"Tanggal Awal",selected:this.state.startDate,onChange:this.handleChangeStartDate}),i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(u.a,{className:"form-control",placeholderText:"Tanggal Akhir",selected:this.state.endDate,onChange:this.handleChangeEndDate}),i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(m.a,{name:"typeBus",placeholder:"Pilih Type Bus",onChange:this.handleChangeTypeBus,options:this.state.dataTypeBus.map((function(a){return e.OptionTypeBus(a)}))}),i.a.createElement("br",null)),i.a.createElement("div",{className:"col-md-3"},i.a.createElement("button",{type:"submit",class:"btn btn-primary",onClick:this.getDataTransaksi},i.a.createElement("i",{className:"fa fa-search"})))),i.a.createElement("br",null),this.state.loading?i.a.createElement(N,null):null,i.a.createElement("br",null),i.a.createElement("p",null,i.a.createElement("strong",null,"DATA TRANSAKSI TUNAI")),i.a.createElement("div",{className:"table-responsive"},i.a.createElement("table",{className:"table table-bordered table-striped text-nowrap"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{rowspan:"2",className:"text-center",style:{width:"1%",verticalAlign:"middle"}},"Produk Bus"),i.a.createElement("th",{colspan:"3",className:"text-center",style:{width:"10%"}},"Tunai"),i.a.createElement("th",{rowspan:"2",className:"text-center",style:{width:"1%",verticalAlign:"middle"}},"Aksi")),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Pnp"),i.a.createElement("th",{className:"text-center"},"Rp"),i.a.createElement("th",{className:"text-center"},"MDR"))),i.a.createElement("tbody",null,this.props.dataTransaksi.map((function(t,n){return i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center"},t.kodeBus),i.a.createElement("td",{className:"text-center"},t.jmlPnpTunai),i.a.createElement("td",{className:"text-right"},a.format(t.jmlBayarTunai)),i.a.createElement("td",{className:"text-right"},a.format(t.mdrTunai)),i.a.createElement("td",null,i.a.createElement("div",{className:"text-center"},i.a.createElement(f.a,{color:"success",onClick:function(a){return e.toggle(t,n)}},"Detail"))))}))),i.a.createElement("tfoot",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center"},i.a.createElement("b",null,"TOTAL")),i.a.createElement("td",{className:"text-center"},this.totalPnpTunai()),i.a.createElement("td",{className:"text-right"},a.format(this.totalBayarTunai())),i.a.createElement("td",{className:"text-right"},a.format(this.totalMdrTunai())),i.a.createElement("td",null)))),i.a.createElement("button",{className:"btn btn-primary",onClick:this.modalTagihan,style:{float:"right"}},i.a.createElement("i",{className:"fa fa-plus"})," Create Tagihan"))))))))),i.a.createElement(g.a,{isOpen:this.state.modal,toggle:this.closeModal,centered:!0,size:"lg"},i.a.createElement(v.a,{toggle:this.closeModal},"Detail Transaksi Bus (",this.state.dataDetail.kodeBus,")"),i.a.createElement(b.a,null,i.a.createElement("div",{className:"table-responsive"},i.a.createElement("table",{className:"table table-bordered table-striped text-nowrap"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{rowspan:"2",className:"text-center",style:{width:"1%",verticalAlign:"middle"}},"Jurusan"),i.a.createElement("th",{rowspan:"2",className:"text-center",style:{width:"1%",verticalAlign:"middle"}},"Asal"),i.a.createElement("th",{rowspan:"2",className:"text-center",style:{width:"1%",verticalAlign:"middle"}},"Tujuan"),i.a.createElement("th",{colspan:"2",className:"text-center",style:{width:"10%"}},"Tunai")),i.a.createElement("tr",null,i.a.createElement("th",{className:"text-center"},"Pnp"),i.a.createElement("th",{className:"text-center"},"Rp"))),i.a.createElement("tbody",null,this.state.dataDetail2.map((function(e){return i.a.createElement("tr",null,i.a.createElement("td",{className:"text-center"},e.namaTrayek),i.a.createElement("td",{className:"text-center"},e.lokasiAwal),i.a.createElement("td",{className:"text-center"},e.lokasiAkhir),i.a.createElement("td",{className:"text-center"},e.jmlPnpTunai),i.a.createElement("td",{className:"text-right"},a.format(e.jmlBayarTunai)))})))))),i.a.createElement(T.a,null,i.a.createElement(f.a,{color:"primary",onClick:this.closeModal},"Tutup"))),i.a.createElement(g.a,{isOpen:this.state.modalTagihans,toggle:this.closeModalTagihan,centered:!0,size:"md"},i.a.createElement(v.a,{toggle:this.closeModalTagihan},"Tagihan Tunai P.O"),i.a.createElement(b.a,null,i.a.createElement("div",{className:"form-horizontal"},i.a.createElement("div",{class:"form-group row"},i.a.createElement("label",{for:"inputPassword",class:"col-sm-3 col-form-label"},"No. Invoice"),i.a.createElement("div",{class:"col-sm-8"},i.a.createElement("input",{type:"text",class:"form-control",placeholder:"No.Invoice",onChange:this.changeInvoice}))),i.a.createElement("div",{class:"form-group row"},i.a.createElement("label",{for:"inputPassword",class:"col-sm-3 col-form-label"},"Keterangan"),i.a.createElement("div",{class:"col-sm-8"},i.a.createElement("textarea",{type:"text",class:"form-control",placeholder:"Keterangan",onChange:this.changeKeterangan}))),i.a.createElement("div",{class:"text-center"},i.a.createElement("button",{class:"btn btn-primary text-center",onClick:function(a){return e.prosesTagihan(a)}},"Proses"))))))}}]),t}(c.Component),D=function(){return i.a.createElement("div",{class:"loader"},i.a.createElement("div",{class:"bar"}))},P=function(e){Object(s.a)(t,e);var a=Object(r.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).hideLoader=function(){l.setState({loading:!1})},l.showLoader=function(){l.setState({loading:!0})},l.endpointPo=function(){p.a.get("/admin/po/getAll").then((function(e){l.setState({dataPo:e.data})}))},l.OptionPo=function(e){return{value:e.idPo,label:e.nama}},l.handleChangePo=function(e){l.setState({idPo:e.value})},l.OptionTypeBus=function(e){return{value:e.id,label:e.nama}},l.handleChangeTypeBus=function(e){l.setState({idTypeBus:e.value})},l.handleChangeStartDate=function(e){l.setState({startDate:e})},l.handleChangeEndDate=function(e){l.setState({endDate:e})},l.getDataTransaksi=function(e){e.preventDefault();var a=E()(l.state.startDate).format("YYYY-MM-DD"),t=E()(l.state.endDate).format("YYYY-MM-DD");l.showLoader(),p.a.get("/admin/invoice/setoran/po?idPo="+l.state.idPo+"&tglAkhir="+t+"&tglAwal="+a+"&type="+l.state.idTypeBus).then((function(e){0!==e.data.data.length?l.setState({dataIsi:!0,listDataTransaksi:e.data.data}):l.setState({dataKosong:!0}),l.hideLoader()}))},l.state={loading:!1,dataKosong:!1,dataIsi:!1,startDate:"",endDate:"",dataPo:[],dataTypeBus:[{id:"0",nama:"ALL"},{id:"1",nama:"JAC"},{id:"2",nama:"JRC"},{id:"3",nama:"TJR"}]},l}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.endpointPo()}},{key:"render",value:function(){var e=this;return this.state.dataIsi?i.a.createElement(y,{dataTransaksi:this.state.listDataTransaksi,idPo:this.state.idPo,tglAwal:this.state.startDate,tglAkhir:this.state.endDate,typeBus:this.state.idTypeBus}):i.a.createElement("div",null,i.a.createElement("div",{className:"content-wrapper"},i.a.createElement("div",{className:"content-header"},i.a.createElement("div",{className:"container-fluid header-fluid"},i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("ol",{className:"breadcrumb float-sm-left"},i.a.createElement("li",{className:"breadcrumb-item"},i.a.createElement("a",{href:"# "},i.a.createElement("b",null,"Home"))),i.a.createElement("li",{className:"breadcrumb-item active"},i.a.createElement("b",null,"Transaksi"))))))),i.a.createElement("div",{class:"container-fluid"},i.a.createElement("div",{class:"col-md-12"},i.a.createElement("div",{class:"card"},i.a.createElement("div",{class:"card-body",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("div",{class:"col-6 main-menu"},i.a.createElement(o.b,{to:"/bumel/transaksiTunai"},i.a.createElement("div",{class:"menu"},"Tunai"))),i.a.createElement("div",{class:"col-6 main-menu"},i.a.createElement(o.b,{to:"/bumel/transaksiNonTunai"},i.a.createElement("div",{class:"menu disabled"},"Non Tunai"))))))),i.a.createElement("section",{className:"content"},i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-2"},i.a.createElement(m.a,{name:"po",placeholder:"Pilih P.O",onChange:this.handleChangePo,options:this.state.dataPo.map((function(a){return e.OptionPo(a)}))})),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(u.a,{className:"form-control",placeholderText:"Tanggal Awal",selected:this.state.startDate,onChange:this.handleChangeStartDate})),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(u.a,{className:"form-control",placeholderText:"Tanggal Akhir",selected:this.state.endDate,onChange:this.handleChangeEndDate})),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(m.a,{name:"typeBus",placeholder:"Pilih Type Bus",onChange:this.handleChangeTypeBus,options:this.state.dataTypeBus.map((function(a){return e.OptionTypeBus(a)}))})),i.a.createElement("div",{className:"col-md-3"},i.a.createElement("button",{type:"submit",class:"btn btn-primary",onClick:this.getDataTransaksi},i.a.createElement("i",{className:"fa fa-search"})))),this.state.loading?i.a.createElement(D,null):null,i.a.createElement("br",null),i.a.createElement("p",null,i.a.createElement("strong",null,"DATA TRANSAKSI TUNAI BUMEL KOSONG"))))))))))}}]),t}(c.Component),k=function(){return i.a.createElement("div",{class:"loader"},i.a.createElement("div",{class:"bar"}))},C=function(e){Object(s.a)(t,e);var a=Object(r.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).hideLoader=function(){l.setState({loading:!1})},l.showLoader=function(){l.setState({loading:!0})},l.endpointPo=function(){p.a.get("/admin/po/getAll").then((function(e){l.setState({dataPo:e.data})}))},l.OptionPo=function(e){return{value:e.idPo,label:e.nama}},l.handleChangePo=function(e){l.setState({idPo:e.value,namaPo:e.label})},l.OptionTypeBus=function(e){return{value:e.id,label:e.nama}},l.handleChangeTypeBus=function(e){l.setState({idTypeBus:e.value})},l.handleChangeStartDate=function(e){l.setState({startDate:e})},l.handleChangeEndDate=function(e){l.setState({endDate:e})},l.getDataTransaksi=function(e){e.preventDefault();var a=E()(l.state.startDate).format("YYYY-MM-DD"),t=E()(l.state.endDate).format("YYYY-MM-DD");l.showLoader(),p.a.get("/admin/invoice/setoran/po?idPo="+l.state.idPo+"&tglAkhir="+t+"&tglAwal="+a+"&type="+l.state.idTypeBus).then((function(e){console.log(e.data),0!==e.data.data.length?l.setState({dataIsi:!0,listDataTransaksi:e.data.data}):l.setState({dataKosong:!0}),l.hideLoader()}))},l.state={loading:!1,dataKosong:!1,dataIsi:!1,startDate:"",endDate:"",dataPo:[],dataTypeBus:[{id:"0",nama:"ALL"},{id:"1",nama:"JAC"},{id:"2",nama:"JRC"},{id:"3",nama:"TJR"}]},l}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.endpointPo()}},{key:"render",value:function(){var e=this;return this.state.dataKosong?i.a.createElement(P,{id:this.state.idProvinsi}):this.state.dataIsi?i.a.createElement(y,{dataTransaksi:this.state.listDataTransaksi,idPo:this.state.idPo,namaPo:this.state.namaPo,tglAwal:this.state.startDate,tglAkhir:this.state.endDate,typeBus:this.state.idTypeBus}):i.a.createElement("div",{className:"content-wrapper"},i.a.createElement("div",{className:"content-header"},i.a.createElement("div",{className:"container-fluid header-fluid"},i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("ol",{className:"breadcrumb float-sm-left"},i.a.createElement("li",{className:"breadcrumb-item"},i.a.createElement("a",{href:"# "},i.a.createElement("b",null,"Home"))),i.a.createElement("li",{className:"breadcrumb-item active"},i.a.createElement("b",null,"Transaksi"))))))),i.a.createElement("div",{class:"container-fluid"},i.a.createElement("div",{class:"col-md-12"},i.a.createElement("div",{class:"card"},i.a.createElement("div",{class:"card-body",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},i.a.createElement("div",{class:"col-6 main-menu"},i.a.createElement(o.b,{to:"/bumel/transaksiTunai"},i.a.createElement("div",{class:"menu"},"Tunai"))),i.a.createElement("div",{class:"col-6 main-menu"},i.a.createElement(o.b,{to:"/bumel/transaksiNonTunai"},i.a.createElement("div",{class:"menu disabled"},"Non Tunai"))))))),i.a.createElement("section",{className:"content"},i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-2"},i.a.createElement(m.a,{name:"po",placeholder:"Pilih P.O",onChange:this.handleChangePo,options:this.state.dataPo.map((function(a){return e.OptionPo(a)}))}),i.a.createElement("br",null)),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(u.a,{className:"form-control",placeholderText:"Tanggal Awal",selected:this.state.startDate,onChange:this.handleChangeStartDate}),i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(u.a,{className:"form-control",placeholderText:"Tanggal Akhir",selected:this.state.endDate,onChange:this.handleChangeEndDate}),i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement("div",{className:"col-md-2"},i.a.createElement(m.a,{name:"typeBus",placeholder:"Pilih Type Bus",onChange:this.handleChangeTypeBus,options:this.state.dataTypeBus.map((function(a){return e.OptionTypeBus(a)}))}),i.a.createElement("br",null)),i.a.createElement("div",{className:"col-md-3"},i.a.createElement("button",{type:"submit",class:"btn btn-primary",onClick:this.getDataTransaksi},i.a.createElement("i",{className:"fa fa-search"})))),this.state.loading?i.a.createElement(k,null):null)))))))}}]),t}(c.Component)}}]);
//# sourceMappingURL=41.8f7eeebc.chunk.js.map